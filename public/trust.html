<!DOCTYPE html>
<html lang="en" data-theme="auto">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#1e1e2e">
  <title>Katulong â€” Trust Certificate</title>
  <link rel="icon" href="/favicon.ico" sizes="32x32">
  <style>
    :root {
      --font-mono: 'JetBrains Mono', ui-monospace, 'SF Mono', Monaco, monospace;
      --bg: #1e1e2e;
      --bg-surface: #313244;
      --border: #45475a;
      --text: #cdd6f4;
      --text-muted: #a6adc8;
      --text-dim: #6c7086;
      --accent-active: #cba6f7;
    }

    [data-theme="light"] {
      --bg: #eff1f5;
      --bg-surface: #ffffff;
      --border: #ccd0da;
      --text: #4c4f69;
      --text-muted: #6c6f85;
      --text-dim: #9ca0b0;
      --accent-active: #8839ef;
    }

    @media (prefers-color-scheme: light) {
      [data-theme="auto"] {
        --bg: #eff1f5;
        --bg-surface: #ffffff;
        --border: #ccd0da;
        --text: #4c4f69;
        --text-muted: #6c6f85;
        --text-dim: #9ca0b0;
        --accent-active: #8839ef;
      }
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      min-height: 100%; background: var(--bg); color: var(--text);
      font-family: var(--font-mono);
    }

    body {
      display: flex; align-items: center; justify-content: center;
      padding: 1rem;
    }

    .trust-card {
      background: var(--bg-surface); border: 1px solid var(--border);
      border-radius: 0.75rem; padding: 2rem; width: min(440px, 100%);
    }

    h1 { font-size: 1.25rem; font-weight: 500; margin-bottom: 0.25rem; }
    h2 { font-size: 0.875rem; font-weight: 500; margin-bottom: 0.5rem; }

    .subtitle {
      color: var(--text-muted); font-size: 0.8125rem; margin-bottom: 1.5rem;
    }

    .download-btn {
      display: flex; align-items: center; justify-content: center;
      width: 100%; height: 2.75rem; border: none; border-radius: 0.5rem;
      background: var(--accent-active); color: #1e1e2e;
      font-size: 0.875rem; font-family: var(--font-mono); font-weight: 500;
      cursor: pointer; text-decoration: none; margin-bottom: 1rem;
    }
    .download-btn:active { opacity: 0.8; }

    .steps {
      list-style: none; padding: 0; margin: 0 0 1rem;
      color: var(--text-muted); font-size: 0.8125rem; line-height: 1.7;
    }
    .steps li { padding: 0.2rem 0; }
    .steps li::before {
      content: attr(data-step) ". ";
      color: var(--text-dim);
    }
    .steps strong { color: var(--text); font-weight: 500; }

    .section { margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border); }
    .section:last-of-type { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }

    details { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); }
    summary {
      color: var(--text-muted); font-size: 0.8125rem; cursor: pointer;
      text-decoration: underline; text-underline-offset: 2px;
    }
    summary:active { color: var(--text); }
    details .steps { margin-top: 0.75rem; }

    .note {
      color: var(--text-dim); font-size: 0.75rem; line-height: 1.5;
      margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border);
    }
  </style>
</head>
<body>
  <div class="trust-card">
    <h1>Trust Certificate</h1>
    <p class="subtitle">Install the Katulong CA certificate to enable secure HTTPS access on your local network.</p>

    <div class="section">
      <a class="download-btn" href="/connect/trust/ca.crt">Download Certificate</a>
    </div>

    <div class="section">
      <h2>iOS</h2>
      <ol class="steps">
        <li data-step="1">Download the <a href="/connect/trust/ca.mobileconfig">iOS profile</a> instead</li>
        <li data-step="2">Open <strong>Settings</strong> &gt; <strong>General</strong> &gt; <strong>VPN &amp; Device Management</strong></li>
        <li data-step="3">Tap the <strong>Katulong Local CA</strong> profile and install it</li>
        <li data-step="4">Go to <strong>Settings</strong> &gt; <strong>General</strong> &gt; <strong>About</strong> (scroll to the very bottom) &gt; <strong>Certificate Trust Settings</strong></li>
        <li data-step="5">Toggle <strong>ON</strong> the switch next to <strong>Katulong Local CA</strong> and confirm</li>
      </ol>
      <p class="steps" style="margin-top: 0.75rem; color: var(--text-dim); font-size: 0.75rem;">
        <strong style="color: var(--text-muted);">Note:</strong> Certificate warnings will persist until step 5 is completed. You can tap "visit this website" to bypass warnings temporarily.
      </p>
    </div>

    <div class="section">
      <h2>Android</h2>
      <ol class="steps">
        <li data-step="1">Open <strong>Settings</strong> &gt; <strong>Security</strong> &gt; <strong>Encryption &amp; credentials</strong></li>
        <li data-step="2">Tap <strong>Install a certificate</strong> &gt; <strong>CA certificate</strong></li>
        <li data-step="3">Select the downloaded <strong>ca.crt</strong> file</li>
      </ol>
    </div>

    <div class="section">
      <h2>macOS</h2>
      <ol class="steps">
        <li data-step="1">Double-click <strong>katulong-ca.crt</strong> to open in Keychain Access</li>
        <li data-step="2">Double-click the certificate, expand <strong>Trust</strong>, set to <strong>Always Trust</strong></li>
      </ol>
    </div>

    <details>
      <summary>Uninstall instructions</summary>
      <h2>iOS</h2>
      <ol class="steps">
        <li data-step="1">Open <strong>Settings</strong> &gt; <strong>General</strong> &gt; <strong>VPN &amp; Device Management</strong></li>
        <li data-step="2">Tap the <strong>Katulong Local CA</strong> profile</li>
        <li data-step="3">Tap <strong>Remove Profile</strong></li>
      </ol>
      <h2>Android</h2>
      <ol class="steps">
        <li data-step="1">Open <strong>Settings</strong> &gt; <strong>Security</strong> &gt; <strong>Encryption &amp; credentials</strong></li>
        <li data-step="2">Tap <strong>Trusted credentials</strong> &gt; <strong>User</strong> tab</li>
        <li data-step="3">Find <strong>Katulong Local CA</strong> and remove it</li>
      </ol>
      <h2>macOS</h2>
      <ol class="steps">
        <li data-step="1">Open <strong>Keychain Access</strong></li>
        <li data-step="2">Find <strong>Katulong Local CA</strong> in the System keychain</li>
        <li data-step="3">Right-click and <strong>Delete</strong></li>
      </ol>
    </details>

    <p class="note">
      This is a private certificate generated by your Katulong instance. It only secures connections on your local network.
    </p>
  </div>
</body>
</html>
